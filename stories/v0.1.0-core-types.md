# Story: v0.1.0 zigFP 完整函数式工具库

> 实现完整的函数式编程工具库

## 目标

实现带有完整类型类支持的函数式编程工具：
- 核心数据类型：Option, Result, Lazy
- 函数工具：compose, curry, pipe
- Monad 家族：Reader, Writer, State
- 高级抽象：Lens, Memoize, Monoid

## 验收标准

### Option 类型 (option.zig)

- [ ] 构造：`some`, `none`, `fromNullable`
- [ ] 检查：`isSome`, `isNone`
- [ ] 解包：`unwrap`, `unwrapOr`, `unwrapOrElse`
- [ ] Functor：`map`
- [ ] Monad：`flatMap`
- [ ] 其他：`filter`, `zip`, `or`
- [ ] 单元测试

### Result 类型 (result.zig)

- [ ] 构造：`ok`, `err`
- [ ] 检查：`isOk`, `isErr`
- [ ] 解包：`unwrap`, `unwrapOr`, `unwrapErr`
- [ ] Functor：`map`, `mapErr`
- [ ] Bifunctor：`bimap`
- [ ] Monad：`flatMap`
- [ ] 转换：`toOption`
- [ ] 单元测试

### Lazy 类型 (lazy.zig)

- [ ] 构造：`init`, `of`
- [ ] 求值：`force`
- [ ] Functor：`map`
- [ ] 记忆化验证
- [ ] 单元测试

### 函数工具 (function.zig)

- [ ] `compose` - 函数组合
- [ ] `curry2` - 二元柯里化
- [ ] `identity` - 恒等函数
- [ ] `constant` - 常量函数
- [ ] `flip` - 参数翻转
- [ ] 单元测试

### Pipe (pipe.zig)

- [ ] `init` - 创建管道
- [ ] `then` - 转换
- [ ] `tap` - 副作用
- [ ] `when` - 条件转换
- [ ] `unwrap` - 获取结果
- [ ] 单元测试

### Reader Monad (reader.zig)

- [ ] `pure` - 包装值
- [ ] `ask` - 获取环境
- [ ] `asks` - 获取环境部分
- [ ] `map` - Functor
- [ ] `flatMap` - Monad
- [ ] `runReader` - 执行
- [ ] 单元测试
- [ ] Monad 法则验证

### Writer Monad (writer.zig)

- [ ] `init` - 创建
- [ ] `pure` - 包装值
- [ ] `tell` - 记录日志
- [ ] `map` - Functor
- [ ] `flatMap` - Monad
- [ ] `run` - 获取结果
- [ ] 单元测试
- [ ] Monad 法则验证

### State Monad (state.zig)

- [ ] `pure` - 包装值
- [ ] `get` - 获取状态
- [ ] `put` - 设置状态
- [ ] `modify` - 修改状态
- [ ] `map` - Functor
- [ ] `flatMap` - Monad
- [ ] `runState`, `evalState`, `execState`
- [ ] 单元测试
- [ ] Monad 法则验证

### Lens (lens.zig)

- [ ] `view` - 获取
- [ ] `set`/`put` - 设置
- [ ] `over` - 修改
- [ ] `compose` - 组合
- [ ] `field` - 字段 Lens 便捷函数
- [ ] Lens 法则验证
- [ ] 单元测试

### Memoize (memoize.zig)

- [ ] `init` - 创建
- [ ] `call` - 调用
- [ ] `deinit` - 释放
- [ ] 缓存命中验证
- [ ] 单元测试

### Monoid (monoid.zig)

- [ ] `concat` - 合并列表
- [ ] `sumMonoid` - 加法
- [ ] `productMonoid` - 乘法
- [ ] `allMonoid` - 与
- [ ] `anyMonoid` - 或
- [ ] Monoid 法则验证
- [ ] 单元测试

### 集成

- [ ] `root.zig` 导出所有模块
- [ ] `zig build test` 通过
- [ ] 无内存泄漏
- [ ] README.md 更新

## 任务分解

### Phase 1: 核心数据类型
1. 实现 `src/option.zig`
2. 实现 `src/result.zig`
3. 实现 `src/lazy.zig`

### Phase 2: 函数工具
4. 实现 `src/function.zig`
5. 实现 `src/pipe.zig`

### Phase 3: Monad 家族
6. 实现 `src/monoid.zig` (Writer 依赖)
7. 实现 `src/reader.zig`
8. 实现 `src/writer.zig`
9. 实现 `src/state.zig`

### Phase 4: 高级抽象
10. 实现 `src/lens.zig`
11. 实现 `src/memoize.zig`

### Phase 5: 集成
12. 创建 `src/root.zig`
13. 运行测试
14. 更新 README.md

## 完成状态

- 开始日期: 2026-01-02
- 完成日期: 2026-01-02
- 状态: ✅ 已完成
